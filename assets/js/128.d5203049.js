(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{512:function(n,e,t){"use strict";t.r(e);var s=t(45),r=Object(s.a)({},(function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"promise-并发控制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#promise-并发控制"}},[n._v("#")]),n._v(" Promise 并发控制")]),n._v(" "),t("p",[n._v("// 页面上有三个按钮，分别为 A、B、C，点击各个按钮都会发送异步请求且互不影响，每次请求回来的数据都为按钮的名字。\n// 请实现当用户依次点击 A、B、C、A、C、B 的时候，最终获取的数据为 ABCACB。\nconst Create = function() {\nconst tasks = [];\nlet first = true;")]),n._v(" "),t("p",[n._v("async function clean() {\nif (tasks.length > 0) {\ntasks[0].then((res) => {\nconsole.log(res);\ntasks.splice(0, 1);\nclean();\n});\n}\n}")]),n._v(" "),t("p",[n._v("return function(promise) {\ntasks.push(promise);")]),n._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[n._v("first && (clean(), (first = false));\n")])])]),t("p",[n._v("};\n};")]),n._v(" "),t("p",[n._v("const create = Create();")]),n._v(" "),t("p",[n._v('function A() {\nreturn new Promise((resolve) => {\nsetTimeout(() => {\nresolve("A");\n}, 1000);\n});\n}\nfunction B() {\nreturn new Promise((resolve) => {\nsetTimeout(() => {\nresolve("B");\n}, 3000);\n});\n}\nfunction C() {\nreturn new Promise((resolve) => {\nsetTimeout(() => {\nresolve("C");\n}, 4000);\n});\n}')]),n._v(" "),t("p",[n._v("create(A());\ncreate(B());\ncreate(C());\ncreate(A());\ncreate(C());\ncreate(B());")])])}),[],!1,null,null,null);e.default=r.exports}}]);