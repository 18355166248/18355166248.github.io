(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{320:function(t,s,a){t.exports=a.p+"assets/img/paste-img-2023-10-14_13_24_40.b3b43970.png"},321:function(t,s,a){t.exports=a.p+"assets/img/paste-img-2023-10-15_10_43_37.06ce143e.png"},322:function(t,s,a){t.exports=a.p+"assets/img/paste-img-2023-10-15_10_46_09.448288e0.png"},323:function(t,s,a){t.exports=a.p+"assets/img/paste-img-2023-10-15_11_05_13.852c278f.png"},324:function(t,s,a){t.exports=a.p+"assets/img/R.6de5b7f2.gif"},325:function(t,s,a){t.exports=a.p+"assets/img/paste-img-2023-10-15_11_45_03.207b47c0.png"},326:function(t,s,a){t.exports=a.p+"assets/img/paste-img-2023-10-15_11_45_26.380cf55f.png"},327:function(t,s,a){t.exports=a.p+"assets/img/paste-img-2023-10-15_11_57_00.62f28022.png"},328:function(t,s,a){t.exports=a.p+"assets/img/paste-img-2023-10-15_11_58_44.eb8cd2ad.png"},723:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"node-å·¥å…·åˆ é™¤æ–‡ä»¶å¤¹å‘½ä»¤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node-å·¥å…·åˆ é™¤æ–‡ä»¶å¤¹å‘½ä»¤"}},[t._v("#")]),t._v(" Node å·¥å…·åˆ é™¤æ–‡ä»¶å¤¹å‘½ä»¤")]),t._v(" "),s("h2",{attrs:{id:"åˆè¡·"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åˆè¡·"}},[t._v("#")]),t._v(" åˆè¡·")]),t._v(" "),s("p",[t._v("è¯´ä¸‹å¼€å‘è¿™ä¸ª node å·¥å…·åº“çš„æ¥ç”±, ä¹‹å‰æ˜¯åœ¨å†™ä¸€ä¸ª monorepo çš„ä¸šåŠ¡ç»„ä»¶åº“, ç„¶åŽé¡¹ç›®é‡Œé¢æœ‰å¥½å‡ ä¸ªåº“, æ¯ä¸ªåº“åœ¨ pnpm å®‰è£…ä¾èµ–çš„æ—¶å€™ä¼šæœ‰ node_modules")]),t._v(" "),s("p",[s("img",{attrs:{src:a(320),alt:""}})]),t._v(" "),s("p",[t._v("ä¸€å¼€å§‹æˆ‘æ˜¯ä½¿ç”¨ rimraf")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("rimraf node_modules "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" rimraf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*/node_modules\n")])])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("ç„¶åŽä¹Ÿå°è¯•è¿‡å¦å¤–ä¸¤ç§")]),t._v(" "),s("p",[t._v("åˆ é™¤ç›®å½•ä¸­æ‰€æœ‰æ‰¾åˆ°çš„ node_modules")]),t._v(" "),s("p",[t._v("è­¦å‘Šï¼è¿™ä¸ªæ­¥éª¤ä¼šåˆ é™¤æ‰€æœ‰åå­—ä¸º node_modules çš„æ–‡ä»¶å¤¹\nè¿›å…¥ç›®å½•\nã€€ cd workplace\nlinux ä¸­åˆ é™¤")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("find "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node_modules"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("type d "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("prune "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("exec rm "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("rf "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{}'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("windows ä¸­")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FOR")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("d "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("r "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v("d "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node_modules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DO")]),t._v(" @"),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IF")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("EXIST")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%d"')]),t._v(" rmdir "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("s "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("q "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%d"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("ä¸Šé¢çš„æ–¹æ³•åœ¨æŸäº›ç‰¹å®šåœºåˆéƒ½æ˜¯å¯ä»¥çš„, ä½†æ˜¯éœ€è¦åŒºåˆ†çŽ¯å¢ƒ, è€Œä¸”è¿˜å¯èƒ½ä¼šæŠ¥é”™, æ¯”å¦‚è¯´åœ¨ window ä¸‹æ‰§è¡Œ rimraf")]),t._v(" "),s("p",[s("img",{attrs:{src:a(321),alt:""}})]),t._v(" "),s("p",[t._v("å½“ç„¶ä¸æ˜¯è¯´é”™è¯¯ä¸èƒ½ä¿®å¤, ä½†æ˜¯éœ€è¦åŽ»è°ƒç ”æŽ’æŸ¥, ä¸æ˜“é•¿æœŸç¨³å®šä½¿ç”¨")]),t._v(" "),s("p",[t._v("æ­£å¥½æˆ‘å‡†å¤‡å†™ä¸€ä¸ª node æ’ä»¶é›†åˆæ–¹ä¾¿ä»¥åŽå¼€å‘ä½¿ç”¨, å°±åšä¸€ä¸ªæ‰¹é‡åˆ é™¤é¡¹ç›®å­åº”ç”¨çš„æŒ‡å®šæ–‡ä»¶å¤¹")]),t._v(" "),s("p",[s("img",{attrs:{src:a(322),alt:""}})]),t._v(" "),s("h2",{attrs:{id:"æ­å»º"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ­å»º"}},[t._v("#")]),t._v(" æ­å»º")]),t._v(" "),s("p",[t._v("è¿™é‡Œæˆ‘é‡‡ç”¨ä¹‹å‰æ²¡æœ‰ä½¿ç”¨è¿‡çš„ "),s("a",{attrs:{href:"https://github.com/unjs/unbuild",target:"_blank",rel:"noopener noreferrer"}},[t._v("unbuild"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/unjs/unbuild",target:"_blank",rel:"noopener noreferrer"}},[t._v("unbuild"),s("OutboundLink")],1),t._v(" åŸºäºŽ Rollupï¼Œé›†æˆäº† Rollup ç”Ÿæ€ä¸­éžå¸¸ä¼˜ç§€çš„æ’ä»¶ï¼Œå¼€ç®±å³ç”¨çš„æ”¯æŒ "),s("code",[t._v("typescript")]),t._v("ï¼Œå¹¶å…è®¸ç”Ÿæˆ "),s("code",[t._v("commonjs")]),t._v(" å’Œ "),s("code",[t._v("esmodule")]),t._v(" æ ¼å¼å’Œç±»åž‹å£°æ˜Žã€‚")]),t._v(" "),s("p",[t._v("åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºæ–‡ä»¶ "),s("code",[t._v("build.config.ts")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineBuildConfig "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"unbuild"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineBuildConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// éœ€è¦æ‰“åŒ…çš„å…¥å£")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entries")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/index"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/bin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/utils/platform.ts"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("clean")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("outDir")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("declaration")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rollup")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// emitCJS: true, // ä¸æ”¯æŒcjs å› ä¸º chalkè¿™ç§ç¬¬ä¸‰æ–¹ä¾èµ–çš„ç‰ˆæœ¬åªæ”¯æŒ ESM")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("esbuild")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// minify: true,")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("p",[t._v("è¿™é‡Œä¸ºå•¥ä¸ç”Ÿæˆ cjs çš„æ‰“åŒ…æ–‡ä»¶, å› ä¸ºæˆ‘ç”¨çš„ç¬¬ä¸‰æ–¹çš„ä¾èµ–æœ€æ–°ç‰ˆæœ¬é»˜è®¤éƒ½å·²ç»æ”¯æŒ ESM æ¨¡å¼")]),t._v(" "),s("p",[t._v("æ‰€ä»¥å¦‚æžœæ‰“åŒ…æˆ cjs çš„æ¨¡å—, åŽ» require è¿™äº›åŒ…çš„æ—¶å€™å…¶å®žæ˜¯æ‰§è¡ŒæŠ¥é”™, è§£å†³æ–¹æ¡ˆå°±æ˜¯å°†ç¬¬ä¸‰æ–¹ä¾èµ–çš„ç‰ˆæœ¬å·é™çº§åˆ°æ”¯æŒ cjs çš„ç‰ˆæœ¬, ä½†æ˜¯å…¶å®žæ²¡å¿…è¦.")]),t._v(" "),s("p",[t._v("å› ä¸º ECMAScript æ¨¡å—æ˜¯ JavaScript çš„æ ‡å‡†æ¨¡å—ç³»ç»Ÿï¼Œå®ƒä½¿ç”¨ import å’Œ export å…³é”®å­—æ¥å¯¼å…¥å’Œå¯¼å‡ºæ¨¡å—ã€‚å®ƒå¯ä»¥åœ¨ Node.js çŽ¯å¢ƒä¸‹å’ŒçŽ°ä»£æµè§ˆå™¨çŽ¯å¢ƒä¸­ä½¿ç”¨ï¼Œå…·æœ‰æ›´å¥½çš„è·¨å¹³å°å…¼å®¹æ€§å’Œå¯ç§»æ¤æ€§ã€‚Node.js ä»Žç‰ˆæœ¬ 12 å¼€å§‹æ”¯æŒ ECMAScript æ¨¡å—ä½œä¸ºå®žéªŒæ€§åŠŸèƒ½ï¼Œå¹¶åœ¨ç‰ˆæœ¬ 14 ä¸­æ­£å¼æ”¯æŒã€‚æ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦éžè¦æ‰“åŒ… cjs æ¨¡å—")]),t._v(" "),s("p",[t._v("é¡¹ç›®çš„ç›®å½•ç»“æž„å¦‚ä¸‹:")]),t._v(" "),s("p",[s("img",{attrs:{src:a(323),alt:""}})]),t._v(" "),s("p",[t._v("æˆ‘ä»¬å¯ä»¥çœ‹åˆ°, å…¥å£çš„æ–‡ä»¶æœ‰ä¸¤ä¸ª, ä¸€ä¸ªæ˜¯ bin ä¸€ä¸ªæ˜¯ index, åŽŸå› æ˜¯å› ä¸ºè¿™ä¸ª node é¡¹ç›®ä¸ä»…æ”¯æŒç»ˆç«¯è°ƒç”¨å‘½ä»¤æ‰§è¡Œæ–¹æ³•ä¹Ÿæ”¯æŒä»£ç å¼•å…¥çš„æ–¹æ³•æ‰§è¡Œå‘½ä»¤")]),t._v(" "),s("p",[t._v("å½“ç„¶è¿™äº›ä¸æ˜¯é‡ç‚¹, é‡ç‚¹çš„ä»£ç ä¸»è¦æ˜¯åœ¨ src/rm/utils ä¸‹, åœ¨å†™æ‰§è¡Œåˆ é™¤æ–‡ä»¶å¤¹çš„åŠŸèƒ½ä¸­, å°è£…äº†å¾ˆå¤šæ–¹æ³•, å¹¶ä¸”é’ˆå¯¹è¿™äº›æ–¹æ³•éƒ½å†™äº†å¯¹åº”çš„å•å…ƒæµ‹è¯•, è€Œä¸”è¦†ç›–çŽ‡éƒ½ä¿è¯æ˜¯åœ¨ 100%, ä¿è¯æˆ‘ä»¬çš„é¡¹ç›®æ‰§è¡Œçš„ç¨³å®šæ€§")]),t._v(" "),s("p",[t._v("æ–‡ç« åŽé¢ä¹Ÿä¼šèŠ±ç¯‡å¹…ç€é‡ä»‹ç»å¦‚ä½•ç¼–å†™ node çš„æµ‹è¯•ç”¨ä¾‹")]),t._v(" "),s("h2",{attrs:{id:"å¼€å‘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¼€å‘"}},[t._v("#")]),t._v(" å¼€å‘")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æ•ˆæžœ")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://github.com/18355166248/swell-node-core/blob/main/swell-node-core-rm.gif?raw=true",alt:""}})]),t._v(" "),s("p",[t._v("é¦–å…ˆæˆ‘ä»¬ä¼šæ‰§è¡Œå‘½ä»¤ ç„¶åŽä¼šåŽ»æ‰§è¡Œåˆ é™¤æŒ‡å®šçš„æ–‡ä»¶å¤¹, å¹¶è®°å½•æ¯ä¸ªæ–‡ä»¶å¤¹çš„å¤§å°, æœ€åŽé€šè¿‡è¡¨æ ¼çš„å½¢å¼å±•ç¤ºåœ¨ç»ˆç«¯å±•ç¤ºå‡ºæ¥è·¯å¾„å’Œå¤§å°")]),t._v(" "),s("p",[t._v("é¦–å…ˆæˆ‘ä»¬å…ˆæ•´ç†çœ‹ä¸‹åˆ é™¤æŒ‡å®šæ–‡ä»¶çš„å…¥å£æ–¹æ³• "),s("code",[t._v("rmDir")]),t._v(", å¹¶é€ä¸€åˆ†æžé‡Œé¢ç”¨åˆ°çš„æ–¹æ³•")]),t._v(" "),s("div",{staticClass:"language-ts line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" chalk "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"chalk"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ora "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ora"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" path "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"path"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" deleteFolders "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./utils/deleteFolders"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" findDirFolders "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./utils/findDirFolders"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" calculateSizeDirs "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./utils/calculateSizeDirs"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" generateTable "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./utils/generateTable"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// èŽ·å–nodeè¿›ç¨‹çš„å·¥ç§ç›®å½•")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cwd "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cwd")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dirName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cwd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é»˜è®¤åˆ é™¤ node_modules æ–‡ä»¶å¤¹")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rmDir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node_modules"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" spinner "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ora")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("åˆ é™¤ ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" ä¸­")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é€’å½’æŸ¥è¯¢æ‰€æœ‰ç¬¦åˆæ ‡å‡†çš„æ–‡ä»¶å¤¹è·¯å¾„")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dirs "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findDirFolders")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dirName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dirs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chalk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yellow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\rðŸ˜– ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("dirName"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" ä¸å­˜åœ¨ ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("exit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŸ¥è¯¢éœ€è¦åˆ é™¤çš„æ–‡ä»¶å¤¹å¤§å°å’Œæ€»å¤§å°")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" entires"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" totalSize "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("calculateSizeDirs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" dirs "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼‚æ­¥æ‰§è¡Œåˆ é™¤æ–‡ä»¶å¤¹")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteFolders")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dirs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      spinner"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("succeed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chalk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("green")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"åˆ é™¤æˆåŠŸ"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åŸºäºŽéœ€è¦åˆ é™¤çš„æ–‡ä»¶å¤¹å¤§å°å’Œæ€»å¤§å°ç”Ÿæˆè¡¨æ ¼")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateTable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" entires"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" totalSize "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    spinner"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fail")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("chalk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("red")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"åˆ é™¤å¤±è´¥ => "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("chalk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("redBright")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    spinner"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stop")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br")])]),s("p",[t._v("ä»¥ä¸Šå°±æ˜¯æ•´ä½“çš„æ‰§è¡Œé€»è¾‘, æˆ‘ä»¬æ•´ç†ä¸‹æ€»å…±ç”¨åˆ°äº†å“ªäº›æ–¹æ³•")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("æ–¹æ³•å")]),t._v(" "),s("th",[t._v("åŠŸèƒ½")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/18355166248/swell-node-core/blob/main/src/rm/utils/findDirFolders.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("findDirFolders"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("é€’å½’æŸ¥è¯¢æ‰€æœ‰ç¬¦åˆæ ‡å‡†çš„æ–‡ä»¶å¤¹è·¯å¾„")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/18355166248/swell-node-core/blob/main/src/rm/utils/calculateSizeDirs.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("calculateSizeDirs"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("æŸ¥è¯¢éœ€è¦åˆ é™¤çš„æ–‡ä»¶å¤¹å¤§å°å’Œæ€»å¤§å°")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/18355166248/swell-node-core/blob/main/src/rm/utils/getDirectorySize.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("getDirectorySize"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("èŽ·å–éœ€è¦åˆ é™¤çš„æ–‡ä»¶å¤¹å¤§å°")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/18355166248/swell-node-core/blob/main/src/rm/utils/deleteFolders.t",target:"_blank",rel:"noopener noreferrer"}},[t._v("deleteFolders"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("å¼‚æ­¥æ‰§è¡Œåˆ é™¤æ–‡ä»¶å¤¹")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/18355166248/swell-node-core/blob/main/src/rm/utils/generateTable.t",target:"_blank",rel:"noopener noreferrer"}},[t._v("generateTable"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("åŸºäºŽéœ€è¦åˆ é™¤çš„æ–‡ä»¶å¤¹å¤§å°å’Œæ€»å¤§å°ç”Ÿæˆè¡¨æ ¼")])]),t._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/18355166248/swell-node-core/blob/main/src/rm/utils/unitsFormatter.t",target:"_blank",rel:"noopener noreferrer"}},[t._v("unitsFormatter"),s("OutboundLink")],1)]),t._v(" "),s("td",[t._v("åŸºäºŽèŽ·å–éœ€è¦åˆ é™¤çš„æ–‡ä»¶å¤¹å¤§å°è½¬æˆæŒ‡å®š MB å’Œ GB æ–‡æœ¬")])])])]),t._v(" "),s("h2",{attrs:{id:"æµ‹è¯•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æµ‹è¯•"}},[t._v("#")]),t._v(" æµ‹è¯•")]),t._v(" "),s("p",[t._v("æµ‹è¯•è¿™å—ä½¿ç”¨äº† "),s("a",{attrs:{href:"https://jestjs.io/docs/api",target:"_blank",rel:"noopener noreferrer"}},[t._v("jest"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("å…¶å®žå†™æµ‹è¯•ç”¨ä¾‹ä¹‹å‰, æˆ‘ä¹Ÿæ²¡æœ‰å†™è¿‡å¾ˆå¤š node æµ‹è¯•ç”¨ä¾‹, æ‰€ä»¥ api è¿™å—çœŸçš„åªèƒ½é æŸ¥æ–‡æ¡£, æ¯•ç«Ÿè®°ä¸ä½, æ‰€ä»¥å¤§å®¶ç¬¬ä¸€æ¬¡å†™æµ‹è¯•ç”¨ä¾‹çš„æ—¶å€™ä¸è¦æ€•å†™ä¸å¥½, æœ‰è€å¿ƒ, æœ‰ç›®æ ‡çš„å­¦ä¹ çŸ¥è¯†ç‚¹å°±è¡Œ, è®°ä¸ä½ä¸ç†Ÿæ‚‰æ˜¯å¾ˆæ­£å¸¸çš„æ—¶æœŸ")]),t._v(" "),s("p",[s("img",{attrs:{src:a(324),alt:""}})]),t._v(" "),s("p",[t._v("åœ¨å†™æµ‹è¯•ç”¨ä¾‹ä¹‹å‰æˆ‘ä»¬è¦ä¸»è¦å­¦ä¹ å‡ ä¸ª api,")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("jest.mock: jest mock åŠŸèƒ½ æ–¹æ³•")])]),t._v(" "),s("li",[s("p",[t._v("jest.spyOn: åˆ›å»ºä¸€ä¸ªç±»ä¼¼äºŽ jest.fn çš„æ¨¡æ‹Ÿå‡½æ•°ï¼Œä½†ä¹Ÿè·Ÿè¸ªæ–¹æ³•çš„è°ƒç”¨ã€‚è¿”å›ž Jest æ¨¡æ‹Ÿå‡½æ•°ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("expect(function).toHaveBeenCalled(): å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨")])]),t._v(" "),s("li",[s("p",[t._v("expect(function).toHaveBeenCalledTimes([Times]): å‡½æ•°æ˜¯è¢«è°ƒç”¨çš„æ¬¡æ•°")])]),t._v(" "),s("li",[s("p",[t._v("expect(function).toHaveBeenLastCalledWith([params]): åˆ é™¤æœ€åŽä¸€æ¬¡è¢«è°ƒç”¨ä¼ å…¥çš„å‚æ•°")])]),t._v(" "),s("li",[s("p",[t._v("expect(function).toHaveBeenCalledWith([params]): å‡½æ•°è°ƒç”¨ä¼ å…¥çš„å‚æ•°")])]),t._v(" "),s("li",[s("p",[t._v("mockReturnValue: mock å‡½æ•°è¿”å›žçš„å€¼")])]),t._v(" "),s("li",[s("p",[t._v("mockRejectedValue: mock Promise å‡½æ•°è¿”å›ž Promise.reject")])])]),t._v(" "),s("p",[t._v("é¦–å…ˆæˆ‘ä»¬çš„åˆ é™¤æ–‡ä»¶å¤¹ä»£ç ä¸­ä½¿ç”¨äº†æ¨¡å— "),s("code",[t._v("fs/promises")]),t._v(" é‡Œé¢çš„ "),s("code",[t._v("rm")]),t._v(" æ–¹æ³•")]),t._v(" "),s("p",[t._v("ä½†æ˜¯æˆ‘ä»¬åœ¨æµ‹è¯•ç”¨ä¸æ˜¯çœŸçš„è¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•")]),t._v(" "),s("p",[t._v("æ‰€ä»¥æˆ‘ä»¬éœ€è¦ mock ä¸€ä¸‹ fs/promises")]),t._v(" "),s("div",{staticClass:"language-ts line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[t._v("jest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fs/promises"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rm"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" jest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("è¿™æ ·åœ¨ä¸‹é¢æ‰§è¡Œ "),s("code",[t._v("fs/promises")]),t._v(" çš„ "),s("code",[t._v("rm")]),t._v(" æ–¹æ³•çš„æ—¶å€™å°±ä¸ä¼šçœŸçš„åŽ»æ‰§è¡Œè¯¥æ–¹æ³•, è€Œæ˜¯åŽ»æ‰§è¡Œä¸€ä¸ªç©ºå‡½æ•° jest.fn()")]),t._v(" "),s("p",[t._v("æ‰€ä»¥æˆ‘ä»¬é’ˆå¯¹ chalk å’Œ ora è¿™ç§ç¬¬ä¸‰æ–¹ä¾èµ–è¿˜æœ‰ utils é‡Œé¢å·²ç»å†™è¿‡æµ‹è¯•ç”¨ä¾‹çš„æ–¹æ³•åš mock å¤„ç†")]),t._v(" "),s("div",{staticClass:"language-ts line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[t._v("jest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"chalk"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  yellow"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" jest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  redBright"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" jest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  green"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" jest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  red"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" jest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\njest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ora"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("succeed")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("fail")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("stop")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™å‡ ä¸ªæ–¹æ³•ä¸éœ€è¦çœŸçš„æ‰§è¡Œ å› ä¸ºå†…éƒ¨å·²ç»å†™è¿‡ä¸€å¥—å•å…ƒæµ‹è¯•, ä¸éœ€è¦å†æ¬¡æ‰§è¡Œå•å…ƒæµ‹è¯•")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æˆ‘ä»¬å¦‚æžœéœ€è¦è¿™äº›æ–¹æ³•è¿”å›žæŸäº›å€¼, åªéœ€è¦åœ¨åŽé¢mockè¿”å›žå€¼å°±è¡Œ ç”¨åˆ°ä¾‹å¦‚ mockReturnValue mockRejectedValue å°±è¡Œ")]),t._v("\njest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./utils/deleteFolders"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\njest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./utils/findDirFolders"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\njest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./utils/calculateSizeDirs"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\njest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./utils/generateTable"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br")])]),s("p",[t._v("æˆ‘ä»¬çš„åŠŸèƒ½ä¼šæœ‰ä¸€äº›æ‰“å°å±•ç¤ºåŠŸèƒ½\n"),s("img",{attrs:{src:a(325),alt:""}}),t._v(" "),s("img",{attrs:{src:a(326),alt:""}})]),t._v(" "),s("p",[t._v("è¿™å—æ‰“å°çš„åŠŸèƒ½æˆ‘ä»¬è¦æ€Žä¹ˆæµ‹è¯•å‘¢")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ "),s("a",{attrs:{href:"https://jestjs.io/docs/jest-object#jestspyonobject-methodname",target:"_blank",rel:"noopener noreferrer"}},[t._v("jest.spyOn"),s("OutboundLink")],1),t._v("\nåˆ›å»ºä¸€ä¸ª mock å‡½æ•°, æ¨¡æ‹ŸçœŸå®žå‡½æ•°çš„æ‰§è¡Œå¹¶ç›‘å¬, å¯ä»¥æ‹¿åˆ°çœŸå®žå‡½æ•°æ‰§è¡Œä¼ å…¥çš„å‚æ•°å’Œè¿”å›žçš„å€¼")]),t._v(" "),s("p",[t._v("æ¯”å¦‚è¯´æˆ‘è¦ç›‘å¬ console.log æ–¹æ³•")]),t._v(" "),s("div",{staticClass:"language-ts line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" logSpy"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" jest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("SpyInstance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  logSpy "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" jest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("spyOn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"log"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mockImplementation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  logSpy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mockRestore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("it")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"..."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("expect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("logSpy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toHaveBeenCalledWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("\\rðŸ˜– ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("dirName"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" ä¸å­˜åœ¨ node_modules")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("p",[t._v("æˆ‘åªéœ€è¦é€šè¿‡ jest.spyOn åˆå§‹åŒ–ä¸€ä¸ª mock å‡½æ•°,ç„¶åŽåœ¨éœ€è¦çš„æ—¶æœºç›‘å¬ "),s("code",[t._v("expect(logSpy)")]),t._v(", å°±å¯ä»¥è°ƒç”¨ toHaveBeenCalled åˆ¤æ–­å‡½æ•°æ˜¯å¦è¢«æ‰§è¡Œ, é€šè¿‡ toHaveBeenCalledWith åˆ¤æ–­æ‰§è¡Œå‡½æ•°ä¼ å…¥çš„å€¼æ˜¯å¤šå°‘, ä»Žè€Œæµ‹è¯•æ‰“å°åŠŸèƒ½æ˜¯å¦æ­£å¸¸")]),t._v(" "),s("h3",{attrs:{id:"æµ‹è¯•è¦†ç›–çŽ‡"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æµ‹è¯•è¦†ç›–çŽ‡"}},[t._v("#")]),t._v(" æµ‹è¯•è¦†ç›–çŽ‡")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬åœ¨å†™å®Œå•å…ƒæµ‹è¯•, æ—¢è¦ä¿è¯æµ‹è¯•åŠŸèƒ½æ­£å¸¸è·‘å®Œ, ä¹Ÿè¦ä¿è¯å•å…ƒæµ‹è¯•çš„è¦†ç›–çŽ‡æ˜¯å¦è¾¾åˆ°è¦æ±‚, æ‰€ä»¥éœ€è¦åšä¸€äº›é…ç½®")]),t._v(" "),s("p",[t._v("å…·ä½“å¯ä»¥çœ‹ "),s("a",{attrs:{href:"https://jestjs.io/docs/configuration#collectcoverage-boolean",target:"_blank",rel:"noopener noreferrer"}},[t._v("jest config collectcoverage"),s("OutboundLink")],1),t._v(" ä¸‹çš„ coverage é…ç½®, æœ‰å¾ˆå¤š")]),t._v(" "),s("p",[t._v("æ¯”å¦‚è¯´ coverageThreshold é…ç½®, å°±æ˜¯ç”¨æ¥é…ç½®è¦†ç›–çŽ‡çš„é˜ˆå€¼çš„, ä½ŽäºŽè¿™ä¸ªé˜ˆå€¼å°±ä¼šæŠ¥é”™, è¡¨ç¤ºå•å…ƒæµ‹è¯•æ²¡æœ‰åˆæ ¼")]),t._v(" "),s("p",[t._v("ç„¶åŽæˆ‘ä»¬çœ‹ä¸‹æœ¬é¡¹ç›®çš„æµ‹è¯•è¦†ç›–çŽ‡æŠ¥å‘Š, æˆ‘ä»¬è¿è¡Œ "),s("code",[t._v("pmpm jest")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(327),alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(328),alt:""}})]),t._v(" "),s("p",[t._v("å…¨éƒ¨ 100%")]),t._v(" "),s("h2",{attrs:{id:"node-å‘½ä»¤é…ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node-å‘½ä»¤é…ç½®"}},[t._v("#")]),t._v(" node å‘½ä»¤é…ç½®")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬å…¥å£ "),s("code",[t._v("bin.ts")]),t._v(" é¡¶éƒ¨æ·»åŠ ä¸€è¡Œä»£ç ")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v(" #"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("env node\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("å…·ä½“è¯´æ˜Žå¯ä»¥çœ‹è¿™é‡Œ "),s("a",{attrs:{href:"https://juejin.cn/post/6844903826344902670",target:"_blank",rel:"noopener noreferrer"}},[t._v("#!/usr/bin/env node åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("ç„¶åŽæˆ‘ä»¬åœ¨ "),s("code",[t._v("package.json")]),t._v(" ä¸­é…ç½®å‘½ä»¤")]),t._v(" "),s("div",{staticClass:"language-json line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"bin"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"snc"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bin/bin.mjs"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"files"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bin"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"types"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./bin/index.d.ts"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[t._v("ç„¶åŽæˆ‘ä»¬å°±å¯ä»¥åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ "),s("code",[t._v("snc")]),t._v(" åŽ»æ‰§è¡Œé…ç½®çš„å‘½ä»¤äº†")]),t._v(" "),s("p",[t._v("é‚£ snc é‡Œé¢æ‰§è¡Œçš„å‘½ä»¤æ˜¯åœ¨å“ªé…ç½®çš„å‘¢, éƒ½åœ¨ "),s("code",[t._v("bin.ts")]),t._v(" ä¸­")]),t._v(" "),s("p",[t._v("ä¸»è¦å°±æ˜¯ä½¿ç”¨äº† "),s("a",{attrs:{href:"https://github.com/tj/commander.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("Command"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token hashbang comment"}},[t._v("#!/usr/bin/env node")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Command "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"commander"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å‘½ä»¤è¡Œå·¥å…·")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" version "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../package.json"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" rmDir "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./rm"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" chalk "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"chalk"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" program "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Command")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä¿®æ”¹å¸®åŠ©ä¿¡æ¯çš„é¦–è¡Œæç¤º")]),t._v("\nprogram"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-v, --version,"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("usage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<command> [options]"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¾“å…¥megaloæ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ ( å½“ä¸è¾“å…¥æˆ–è€…è¾“å…¥ --help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ )")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("argv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("argv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"--help"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  program"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("outputHelp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// é…ç½®æ‰¹é‡åˆ é™¤æ–‡ä»¶å¤¹å‘½ä»¤")]),t._v("\nprogram\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("command")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rm [dir-name]"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("description")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"åˆ é™¤æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å¤¹( é»˜è®¤æ˜¯ node_modules )"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("dirName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cmd")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¾“å…¥å‚æ•°æ ¡éªŒ")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("validateArgsLen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("argv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rmDir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dirName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æŠŠå‘½ä»¤è¡Œå‚æ•°æä¾›ç»™ commander è§£æž")]),t._v("\nprogram"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("argv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("validateArgsLen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("argLen")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("MaxArgLength")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("argLen "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" MaxArgLength"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chalk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yellow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\n æç¤º: å‚æ•°è¶…è¿‡æœŸæœ›é•¿åº¦, å¤šä½™å‚æ•°è‡ªåŠ¨å¿½ç•¥"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br")])]),s("p",[t._v("ç„¶åŽæˆ‘ä»¬ä½¿ç”¨ snc rm [path] å³å¯æ‰§è¡Œåˆ é™¤å‘½ä»¤äº†")]),t._v(" "),s("h2",{attrs:{id:"æœ¬åœ°è°ƒè¯•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æœ¬åœ°è°ƒè¯•"}},[t._v("#")]),t._v(" æœ¬åœ°è°ƒè¯•")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨æ˜¯é€šè¿‡ npm å…¨å±€å®‰è£…ä½¿ç”¨åŠŸèƒ½, ä½†æ˜¯ä¸é€‚åˆæœ¬åœ°è°ƒè¯• æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å€Ÿç”¨ pnpm link çš„åŠŸèƒ½")]),t._v(" "),s("h3",{attrs:{id:"pnpm-link"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-link"}},[t._v("#")]),t._v(" pnpm link")]),t._v(" "),s("ol",[s("li",[t._v("é¦–å…ˆç›‘å¬ ä½¿ç”¨ unbuild --stub")]),t._v(" "),s("li",[t._v("pnpm link --global")])]),t._v(" "),s("p",[t._v("è¿™æ ·æˆ‘ä»¬ä¿®æ”¹ src ä¸‹çš„ä»£ç , å°±ä¼šå®žæ—¶æ›´æ–°")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬åœ¨éœ€è¦ä½¿ç”¨çš„æ—¶å€™, åªéœ€è¦åœ¨å…¶ä»–é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œ snc å‘½ä»¤å³å¯")]),t._v(" "),s("h3",{attrs:{id:"pnpm-unlink"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pnpm-unlink"}},[t._v("#")]),t._v(" pnpm unlink")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("pnpm unlink "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("global swell"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("core\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h2",{attrs:{id:"å‘å¸ƒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‘å¸ƒ"}},[t._v("#")]),t._v(" å‘å¸ƒ")]),t._v(" "),s("p",[t._v("å‘å¸ƒè¿™å—æˆ‘å°±ä¸ç»†è¯´äº† å°±æ˜¯æ‰§è¡Œäº† "),s("code",[t._v("npm publish")])]),t._v(" "),s("p",[t._v("ç‰ˆæœ¬å·æŽ§åˆ¶ä½¿ç”¨äº† "),s("a",{attrs:{href:"https://www.npmjs.com/package/standard-version",target:"_blank",rel:"noopener noreferrer"}},[t._v("standard-version"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);