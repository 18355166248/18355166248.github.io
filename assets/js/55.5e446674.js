(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{440:function(e,n,t){"use strict";t.r(n);var s=t(45),o=Object(s.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"_146-lru缓存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_146-lru缓存"}},[e._v("#")]),e._v(" 146.LRU缓存")]),e._v(" "),t("p",[e._v("class ListNode {\nconstructor(key, value) {\nthis.key = key;\nthis.value = value;\nthis.next = null;\nthis.prev = null;\n}\n}")]),e._v(" "),t("p",[e._v("class LRUCache {\nconstructor(max) {\nthis.max = max; // 缓存最大数目\nthis.hash = {}; // 哈希表\nthis.count = 0; // 缓存数目\nthis.dummyHead = new ListNode(); // 虚拟头结点\nthis.dummyTail = new ListNode(); // 虚拟尾结点\nthis.dummyHead.next = this.dummyTail;\nthis.dummyTail.prev = this.dummyHead;\n}")]),e._v(" "),t("p",[e._v("get(key) {\nlet node = this.hash[key];\nif (!node) return -1;\nthis.moveToHead(node);\nreturn node.value;\n}")]),e._v(" "),t("p",[e._v("moveToHead(node) {\nthis.removeFromList(node);\nthis.addToHead(node);\n}\nremoveFromList(node) {\nconst prev = node.prev;\nconst next = node.next;\nprev.next = node.next;\nnext.prev = prev;\n}\naddToHead(node) {\nnode.prev = this.dummyHead;\nnode.next = this.dummyHead.next;\nthis.dummyHead.next.prev = node; // 原来真实头节点的prev指向node\nthis.dummyHead.next = node;\n}\nput(key, value) {\nlet node = this.hash[key];")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("// 不存在\nif (node === null) {\n  if (this.count === this.max) {\n    // 存储满了, 删除最远一次使用的数据\n    this.removeLRUItem();\n  }\n  const newNode = new ListNode(key, value);\n  this.hash[key] = newNode;\n  this.addToHead(newNode);\n  this.count++;\n} else {\n  node.value = value; // 存在 更新value\n  this.moveToHead(node); // 将数据更新到头部\n}\n")])])]),t("p",[e._v("}\nremoveLRUItem() {\nconst tail = this.popTail();\ndelete this.hash[tail.key];\nthis.count--;\n}\npopTail() {\nconst tail = this.dummyTail.prev;\nthis.removeFromList(tail);\nreturn tail;\n}\n}")])])}),[],!1,null,null,null);n.default=o.exports}}]);