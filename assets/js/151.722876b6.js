(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{552:function(e,t,n){"use strict";n.r(t);var o=n(45),r=Object(o.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"不可修改对象"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#不可修改对象"}},[e._v("#")]),e._v(" 不可修改对象")]),e._v(" "),n("p",[e._v("const { object } = require('assert-plus')")]),e._v(" "),n("p",[e._v("function createConst(obj) {\nconst keys = Object.getOwnPropertyNames(obj)")]),e._v(" "),n("p",[e._v("keys.forEach(key => {\nconst prop = obj[key]")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[e._v("if (typeof prop === 'object' && prop !== null) {\n  obj[key] = createConst(prop)\n}\n")])])]),n("p",[e._v("})")]),e._v(" "),n("p",[e._v("Object.freeze(obj)")]),e._v(" "),n("p",[e._v("return new Proxy(obj, {\ndeleteProperty: function (target, key) {\nthrow new Error('不能删除' + key)\n},\nget: function (target, key) {\nconsole.log(target, key)\nif (!target.hasOwnProperty(key)) {\nthrow new Error(key + '不存在')\n} else {\nreturn target[key]\n}\n},\nset: function (target, key) {\nconsole.log(key)\nthrow new Error('不能修改'+key)\n}\n})")]),e._v(" "),n("p",[e._v("}")]),e._v(" "),n("p",[e._v('const settings = {\nappName:"fan",\ninfo: {p1:200,p2:300 }\n};')]),e._v(" "),n("p",[e._v("const o = createConst(settings)")]),e._v(" "),n("p",[e._v("// settings.appName = 1 ;")]),e._v(" "),n("p",[e._v('// o.other = "abc";')]),e._v(" "),n("p",[e._v("// console.log(o.a)")]),e._v(" "),n("p",[e._v("// o.info.p1 = 100;")]),e._v(" "),n("p",[e._v("delete o.info.p1")]),e._v(" "),n("p",[e._v("console.info(o)")])])}),[],!1,null,null,null);t.default=r.exports}}]);