<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Umd</title>
</head>

<body>

  <script type="text/javascript">
    (function (root, factory) {
      if (typeof exports === 'object' && typeof module === 'object') {
        // CommonJS规范 node 环境 判断是否支持 module.exports 支持 require 这种方法
        module.exports = factory(require)
      } else if (typeof define === 'function' && define.md) {
        // AMD 如果环境中有define函数，并且define函数具备amd属性，则可以判断当前环境满足AMD规范
        console.log('是AMD模块规范，如require.js')
        define(factory())
      } else if (typeof exports === 'object') {
        // 不支持 module 但是支持 exports 的情况下使用 exports导出 是CommonJS 规范
        exports['jiang-hooks'] = factory()
      } else {
        // 直接挂载在全局对象上
        root.umdModule = factory()
      }

    }(this, function () {
      return {
        name: 'Umd模块'
      }
    }))

    console.log(window.umdModule)
  </script>

  <script type="text/javascript">
    !(function (e, t) {
      'object' == typeof exports && 'object' == typeof module
        ? (module.exports = t(require('React')))
        : 'function' == typeof define && define.amd
          ? define(['React'], t)
          : 'object' == typeof exports
            ? (exports['jiang-hooks'] = t(require('React')))
            : (e['jiang-hooks'] = t(e.React));
    })(this, function (e) {
      return (function (e) {
        var t = {};
        function n(r) {
          if (t[r]) return t[r].exports;
          var u = (t[r] = { i: r, l: !1, exports: {} });
          return e[r].call(u.exports, u, u.exports, n), (u.l = !0), u.exports;
        }
        return (
          (n.m = e),
          (n.c = t),
          (n.d = function (e, t, r) {
            n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: r });
          }),
          (n.r = function (e) {
            'undefined' != typeof Symbol &&
              Symbol.toStringTag &&
              Object.defineProperty(e, Symbol.toStringTag, { value: 'Module' }),
              Object.defineProperty(e, '__esModule', { value: !0 });
          }),
          (n.t = function (e, t) {
            if ((1 & t && (e = n(e)), 8 & t)) return e;
            if (4 & t && 'object' == typeof e && e && e.__esModule) return e;
            var r = Object.create(null);
            if (
              (n.r(r),
                Object.defineProperty(r, 'default', { enumerable: !0, value: e }),
                2 & t && 'string' != typeof e)
            )
              for (var u in e)
                n.d(
                  r,
                  u,
                  function (t) {
                    return e[t];
                  }.bind(null, u),
                );
            return r;
          }),
          (n.n = function (e) {
            var t =
              e && e.__esModule
                ? function () {
                  return e.default;
                }
                : function () {
                  return e;
                };
            return n.d(t, 'a', t), t;
          }),
          (n.o = function (e, t) {
            return Object.prototype.hasOwnProperty.call(e, t);
          }),
          (n.p = ''),
          n((n.s = 1))
        );
      })([
        function (t, n) {
          t.exports = e;
        },
        function (e, t, n) {
          'use strict';
          n.r(t),
            n.d(t, 'useUpdate', function () {
              return u;
            }),
            n.d(t, 'useToggle', function () {
              return o;
            }),
            n.d(t, 'useBoolean', function () {
              return i;
            }),
            n.d(t, 'useEventEmitter', function () {
              return s;
            }),
            n.d(t, 'useCreation', function () {
              return l;
            }),
            n.d(t, 'usePersistFn', function () {
              return d;
            });
          var r = n(0),
            u = function () {
              var e = Object(r.useState)(0)[1];
              return Object(r.useCallback)(function () {
                return e(function (e) {
                  return e + 1;
                });
              }, []);
            };
          var o = function (e, t) {
            void 0 === e && (e = !1);
            var n = Object(r.useState)(e),
              u = n[0],
              o = n[1],
              i = Object(r.useMemo)(
                function () {
                  return void 0 === t ? !t : t;
                },
                [t],
              );
            return [
              u,
              Object(r.useMemo)(
                function () {
                  return {
                    toggle: function (t) {
                      o(
                        void 0 === t
                          ? function (t) {
                            return t === e ? i : e;
                          }
                          : t,
                      );
                    },
                    setLeft: function () {
                      return o(e);
                    },
                    setRight: function () {
                      return o(i);
                    },
                  };
                },
                [o],
              ),
            ];
          };
          var i = function (e) {
            void 0 === e && (e = !1);
            var t = o(e),
              n = t[0],
              u = t[1].toggle;
            return [
              n,
              Object(r.useMemo)(
                function () {
                  return {
                    setTrue: function () {
                      return u(!0);
                    },
                    setFalse: function () {
                      return u(!1);
                    },
                    toggle: u,
                  };
                },
                [u],
              ),
            ];
          };
          function c(e, t) {
            var n = ('undefined' != typeof Symbol && e[Symbol.iterator]) || e['@@iterator'];
            if (n) return (n = n.call(e)).next.bind(n);
            if (
              Array.isArray(e) ||
              (n = (function (e, t) {
                if (!e) return;
                if ('string' == typeof e) return f(e, t);
                var n = Object.prototype.toString.call(e).slice(8, -1);
                'Object' === n && e.constructor && (n = e.constructor.name);
                if ('Map' === n || 'Set' === n) return Array.from(e);
                if ('Arguments' === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
                  return f(e, t);
              })(e)) ||
              (t && e && 'number' == typeof e.length)
            ) {
              n && (e = n);
              var r = 0;
              return function () {
                return r >= e.length ? { done: !0 } : { done: !1, value: e[r++] };
              };
            }
            throw new TypeError(
              'Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.',
            );
          }
          function f(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++) r[n] = e[n];
            return r;
          }
          var a = (function () {
            function e() {
              var e = this;
              (this.subscriptions = new Set()),
                (this.useOn = function (t) {
                  var n = Object(r.useRef)();
                  (n.current = t),
                    Object(r.useEffect)(function () {
                      function t(e) {
                        n.current && n.current(e);
                      }
                      return (
                        e.subscriptions.add(t),
                        function () {
                          e.subscriptions.delete(t);
                        }
                      );
                    }, []);
                });
            }
            return (
              (e.prototype.emit = function (e) {
                for (var t, n = c(this.subscriptions); !(t = n()).done;) {
                  (0, t.value)(e);
                }
              }),
              e
            );
          })();
          function s() {
            var e = Object(r.useRef)();
            return e.current || (e.current = new a()), e.current;
          }
          function l(e, t) {
            var n = Object(r.useRef)({ deps: t, obj: void 0, initial: !1 }).current;
            return (
              (!1 !== n.initial &&
                (function (e, t) {
                  if (e === t) return !0;
                  for (var n = 0; n < e.length; n++) if (e[n] !== t[n]) return !1;
                  return !0;
                })(n.deps, t)) ||
              ((n.deps = t), (n.obj = e()), (n.initial = !0)),
              n.obj
            );
          }
          function d(e) {
            var t = Object(r.useRef)(e);
            t.current = e;
            var n = Object(r.useRef)();
            return (
              n.current ||
              (n.current = function () {
                return t.current();
              }),
              n.current
            );
          }
        },
      ]);
    });

  </script>
</body>

</html>
